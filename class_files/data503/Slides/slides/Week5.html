<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Jed Rembold">
  <meta name="dcterms.date" content="2025-02-12">
  <title>Docking Constraints</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../html_srcs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../html_srcs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../html_srcs/revealjs/../css/theme/nord_light.css" id="theme">
  <link rel="stylesheet" href="../html_srcs/revealjs/../css/highlight/nord.css">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Docking Constraints</h1>
  <p class="author">Jed Rembold</p>
  <p class="date">February 12, 2025</p>
</section>

<section id="announcements" class="slide level2">
<h2>Announcements</h2>
<ul>
<li>Homework
<ul>
<li>HW4 due</li>
<li>I had 10+ hrs of grading this weekend for another class, so I’m
still playing catch-up on HW3 feedback. Sorry, it is coming soon.</li>
<li>I’ll include passwords to HW1 and HW2 solutions when I score
HW3</li>
</ul></li>
<li>Fill out the form that Hillary sent about desired summer courses!
<ul>
<li>There are many constraints, so we are trying to figure out how to
best ensure the most people are well served</li>
</ul></li>
</ul>
</section>
<section>
<section id="on-the-dock-of-the-bay" class="title-slide slide level1">
<h1>On the Dock of the Bay…</h1>

</section>
<section id="docker-overview" class="slide level2">
<h2>Docker Overview</h2>
<div class="cols" style="align-items: center">
<div class="col">
<ul>
<li>Docker is just one method (though the most popular) to run
applications in what are called <em>containers</em></li>
<li>A container is an isolated environment that can run basically
anything.</li>
<li>Examples:
<ul>
<li>A webpage server</li>
<li>A Postgres database</li>
<li>An R or Python program</li>
</ul></li>
</ul>
</div>
<div class="col">
<p><img
data-src="https://1000logos.net/wp-content/uploads/2021/11/Docker-Logo-2013.png" /></p>
</div>
</div>
</section>
<section id="a-case-for-containers" class="slide level2">
<h2>A Case for Containers</h2>
<ul>
<li>Why are containers useful?
<ul>
<li>Development environments can be difficult to replicate
<ul>
<li>Your environment has been tailored to you!</li>
<li>Your OS, your software dependencies, your installed R libraries</li>
</ul></li>
<li>Development environments are not static
<ul>
<li>Libraries get new updates or patches</li>
<li>Some software gets abandoned or features discontinued</li>
</ul></li>
</ul></li>
<li>Containers contain a working copy of an exact development
environment with specific versioning</li>
<li>All that is needed to share with 100% reliability is software to run
the container</li>
</ul>
</section>
<section id="alternatives" class="slide level2">
<h2>Alternatives?</h2>
<ul>
<li>Why not include a list of dependencies and let people install them?
<ul>
<li>This can work, but can get very muddled when working on multiple
projects (what if I need both Python 3.6 and Python 3.10 installed
simultaneously on my system?)</li>
<li>Different operating systems also just do things differently or can
have different libraries available</li>
</ul></li>
<li>Why not use Virtual Machines to replicate the development
environment?
<ul>
<li>They can, but VMs run independent of your machine’s natural OS,
interfacing directly with the hardware</li>
<li>This can make them potentially more performant, but it also means a
lot more overhead each time something needs to be run (they are running
their own entire OS)</li>
</ul></li>
</ul>
</section>
<section id="the-container-way" class="slide level2">
<h2>The Container Way</h2>
<ul>
<li>Containers run <em>on top</em> of your natural operating system
<ul>
<li>Requests to use hardware go through your host OS
<ul>
<li>Your natural OS acts as a sort of translator between the application
and the hardware</li>
<li>Operating systems are amazingly flexible, and so your system OS can
handle this easily despite needing to translate for a potentially wide
variety of container types</li>
</ul></li>
<li>There may be a slight raw performance hit, but it is
<strong>much</strong> faster and easier on system resources to start up,
work with, and run multiple containers at the same time</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="using-docker" class="title-slide slide level1">
<h1>Using Docker</h1>

</section>
<section id="installing-docker" class="slide level2">
<h2>Installing Docker</h2>
<ul>
<li>Getting Docker on your system is easy:
<ul>
<li>In MacOS: install <a
href="https://www.docker.com/products/docker-desktop/">Docker
Desktop</a>
<ul>
<li>Simply drag and drop into your Applications folder</li>
</ul></li>
<li>In Windows: still install <a
href="https://www.docker.com/products/docker-desktop/">Docker
Desktop</a>
<ul>
<li>Technically uses WSL2 in the background, but you already have that
installed (or it is proving to be a bit better than GitBash, so you
might consider it)</li>
</ul></li>
<li>In Linux: you could install Docker Desktop, but easier to just
install Docker from system repos</li>
</ul></li>
<li>Running Docker Desktop will launch both a GUI and the service itself
<ul>
<li>The service <em>must</em> be running for your system to understand
Docker containers</li>
</ul></li>
</ul>
</section>
<section id="images" class="slide level2">
<h2>Images</h2>
<ul>
<li>Docker uses what it calls an <em>image</em> whenever it needs to
create a new container</li>
<li>An image is basically a blueprint or compilation of all the things
that the container will need to function
<ul>
<li>Basic OS</li>
<li>Any runtime environment (R, Python, etc.)</li>
<li>The application code itself</li>
<li>Any dependencies necessary</li>
<li>Extra configuration options, usually in the form of environment
variables</li>
<li>The actual commands to run when the container is launched</li>
</ul></li>
<li>Images are <strong>read only</strong>. If any of the above changes,
the image needs to be rebuilt</li>
</ul>
</section>
<section id="image-layering" class="slide level2">
<h2>Image Layering</h2>
<div class="cols" style="align-items:center">
<div class="col">
<ul>
<li>Images are constructed with a layering system, which helps when
rebuilding
<ul>
<li>Only layers at or above where a change happened need to be
reconstructed
<ul>
<li>This means ordering <em>does</em> matter!</li>
</ul></li>
<li>Layers generally mimic the same basic blueprint requirements that we
just listed</li>
</ul></li>
</ul>
</div>
<div class="col">
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="133.88229mm"
   height="133.88229mm"
   viewBox="0 0 133.88229 133.88229"
   version="1.1"
   id="svg5"
   inkscape:version="1.2.1 (9c6d41e410, 2022-07-14, custom)"
   sodipodi:docname="docker_image_layers.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="1.2938725"
     inkscape:cx="455.99547"
     inkscape:cy="223.36049"
     inkscape:window-width="1680"
     inkscape:window-height="1020"
     inkscape:window-x="0"
     inkscape:window-y="30"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs2" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-296.09671,-28.553965)">
    <rect
       style="fill:none;stroke:#5a4a78;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       id="rect739"
       width="130.88229"
       height="130.88229"
       x="297.59671"
       y="30.053965" />
    <rect
       style="fill:#166775;fill-opacity:0.444791;stroke:#166775;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round"
       id="rect1569"
       width="119.4318"
       height="21.899897"
       x="303.32196"
       y="130.86113" />
    <rect
       style="fill:#8f5e15;fill-opacity:0.444791;stroke:#8f5e15;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round"
       id="rect1679"
       width="119.4318"
       height="21.899897"
       x="303.32196"
       y="99.983818" />
    <rect
       style="fill:#8f5e15;fill-opacity:0.444791;stroke:#8f5e15;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round"
       id="rect1681"
       width="119.4318"
       height="21.899897"
       x="303.32196"
       y="69.106514" />
    <rect
       style="fill:#8f5e15;fill-opacity:0.444791;stroke:#8f5e15;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round"
       id="rect1683"
       width="119.4318"
       height="21.899897"
       x="303.32196"
       y="38.229198" />
    <g
       aria-label="Base Image"
       id="text1749"
       style="font-size:21.8091px;font-family:'Bebas Neue';-inkscape-font-specification:'Bebas Neue, Normal';fill:#343b58;fill-opacity:0.999988;stroke-width:1.20297;stroke-linecap:round;stroke-linejoin:round">
      <path
         d="m 324.68659,134.17789 h 3.62031 q 1.85378,0 2.70433,0.87236 0.85056,0.85056 0.85056,2.63891 v 0.61065 q 0,1.17769 -0.39257,1.9192 -0.37075,0.74151 -1.15588,1.06865 v 0.0436 q 1.78835,0.61066 1.78835,3.18413 v 1.30855 q 0,1.76654 -0.9378,2.70433 -0.91598,0.91598 -2.70432,0.91598 h -3.77298 z m 3.33679,6.21559 q 0.7197,0 1.06865,-0.37075 0.37076,-0.37076 0.37076,-1.24312 v -0.85055 q 0,-0.82875 -0.30533,-1.19951 -0.28352,-0.37075 -0.91598,-0.37075 h -1.15589 v 4.03468 z m 0.43619,6.86987 q 0.63246,0 0.93779,-0.32714 0.30533,-0.34894 0.30533,-1.17769 v -1.33035 q 0,-1.04684 -0.37076,-1.4394 -0.34894,-0.41438 -1.17769,-0.41438 h -1.06865 v 4.68896 z"
         id="path242" />
      <path
         d="m 335.35123,134.17789 h 3.24955 l 2.48624,15.26637 h -2.399 l -0.43618,-3.03147 v 0.0436 h -2.72614 l -0.43618,2.98785 h -2.22453 z m 2.61709,10.20666 -1.06865,-7.54595 h -0.0436 l -1.04684,7.54595 z"
         id="path244" />
      <path
         d="m 345.29615,149.66235 q -1.74473,0 -2.6389,-0.98141 -0.89417,-1.00322 -0.89417,-2.85699 v -0.87236 h 2.26814 v 1.04683 q 0,1.48302 1.24312,1.48302 0.61066,0 0.91598,-0.34894 0.32714,-0.37076 0.32714,-1.1777 0,-0.9596 -0.43618,-1.6793 -0.43618,-0.74151 -1.61388,-1.76653 -1.48301,-1.30855 -2.07186,-2.35539 -0.58885,-1.06864 -0.58885,-2.399 0,-1.81015 0.91599,-2.79156 0.91598,-1.00322 2.66071,-1.00322 1.72292,0 2.59528,1.00322 0.89417,0.98141 0.89417,2.83518 v 0.63246 h -2.26814 v -0.78512 q 0,-0.78513 -0.30533,-1.13408 -0.30533,-0.37075 -0.89417,-0.37075 -1.19951,0 -1.19951,1.46121 0,0.82874 0.43619,1.54844 0.45799,0.71971 1.63568,1.74473 1.50483,1.30855 2.07186,2.37719 0.56704,1.06865 0.56704,2.50805 0,1.87558 -0.93779,2.8788 -0.91598,1.00322 -2.68252,1.00322 z"
         id="path246" />
      <path
         d="m 350.29043,134.17789 h 6.54273 v 2.18091 h -4.14373 v 4.03468 h 3.29317 v 2.18091 h -3.29317 v 4.68896 h 4.14373 v 2.18091 h -6.54273 z"
         id="path248" />
      <path
         d="m 361.6966,134.17789 h 2.399 v 15.26637 h -2.399 z"
         id="path250" />
      <path
         d="m 365.88394,134.17789 h 3.42403 l 1.52663,10.92636 h 0.0436 l 1.52664,-10.92636 h 3.42403 v 15.26637 h -2.26815 v -11.55882 h -0.0436 l -1.74472,11.55882 h -2.00644 l -1.74473,-11.55882 h -0.0436 v 11.55882 h -2.09367 z"
         id="path252" />
      <path
         d="m 379.47101,134.17789 h 3.24955 l 2.48624,15.26637 h -2.399 l -0.43618,-3.03147 v 0.0436 h -2.72614 l -0.43618,2.98785 h -2.22453 z m 2.61709,10.20666 -1.06865,-7.54595 h -0.0436 l -1.04683,7.54595 z"
         id="path254" />
      <path
         d="m 389.72125,149.66235 q -1.74473,0 -2.66071,-0.98141 -0.91599,-1.00322 -0.91599,-2.85699 v -8.02575 q 0,-1.85377 0.91599,-2.83518 0.91598,-1.00322 2.66071,-1.00322 1.74472,0 2.66071,1.00322 0.91598,0.98141 0.91598,2.83518 v 1.30855 h -2.26815 v -1.46121 q 0,-1.50483 -1.24312,-1.50483 -1.24311,0 -1.24311,1.50483 v 8.35288 q 0,1.48302 1.24311,1.48302 1.24312,0 1.24312,-1.48302 v -2.98784 h -1.1995 v -2.18091 h 3.46765 v 4.99428 q 0,1.85377 -0.91598,2.85699 -0.91599,0.98141 -2.66071,0.98141 z"
         id="path256" />
      <path
         d="m 394.84641,134.17789 h 6.54273 v 2.18091 h -4.14373 v 4.03468 h 3.29317 v 2.18091 h -3.29317 v 4.68896 h 4.14373 v 2.18091 h -6.54273 z"
         id="path258" />
    </g>
    <g
       aria-label="Application"
       id="text1753"
       style="font-size:21.8091px;font-family:'Bebas Neue';-inkscape-font-specification:'Bebas Neue, Normal';fill:#343b58;fill-opacity:0.999988;stroke-width:1.20297;stroke-linecap:round;stroke-linejoin:round">
      <path
         d="m 324.33767,103.30058 h 3.24955 l 2.48624,15.26637 h -2.399 l -0.43618,-3.03147 v 0.0436 h -2.72614 l -0.43618,2.98785 h -2.22453 z m 2.61709,10.20666 -1.06865,-7.54595 h -0.0436 l -1.04684,7.54595 z"
         id="path219" />
      <path
         d="m 331.22932,103.30058 h 3.53308 q 1.78834,0 2.68252,0.9596 0.89417,0.9596 0.89417,2.81337 v 1.50483 q 0,1.85377 -0.89417,2.81337 -0.89418,0.9596 -2.68252,0.9596 h -1.13408 v 6.2156 h -2.399 z m 3.53308,6.86986 q 0.58884,0 0.87236,-0.32713 0.30533,-0.32714 0.30533,-1.11227 v -1.81015 q 0,-0.78513 -0.30533,-1.11227 -0.28352,-0.32713 -0.87236,-0.32713 h -1.13408 v 4.68895 z"
         id="path221" />
      <path
         d="m 339.64763,103.30058 h 3.53307 q 1.78835,0 2.68252,0.9596 0.89418,0.9596 0.89418,2.81337 v 1.50483 q 0,1.85377 -0.89418,2.81337 -0.89417,0.9596 -2.68252,0.9596 h -1.13407 v 6.2156 h -2.399 z m 3.53307,6.86986 q 0.58885,0 0.87237,-0.32713 0.30532,-0.32714 0.30532,-1.11227 v -1.81015 q 0,-0.78513 -0.30532,-1.11227 -0.28352,-0.32713 -0.87237,-0.32713 h -1.13407 v 4.68895 z"
         id="path223" />
      <path
         d="m 348.06593,103.30058 h 2.399 v 13.08546 h 3.94745 v 2.18091 h -6.34645 z"
         id="path225" />
      <path
         d="m 355.56826,103.30058 h 2.399 v 15.26637 h -2.399 z"
         id="path227" />
      <path
         d="m 363.13601,118.78504 q -1.72292,0 -2.6389,-0.98141 -0.89418,-0.98141 -0.89418,-2.76976 v -8.20022 q 0,-1.78834 0.89418,-2.76975 0.91598,-0.98141 2.6389,-0.98141 1.72292,0 2.61709,0.98141 0.91598,0.98141 0.91598,2.76975 v 1.61388 h -2.26815 v -1.76654 q 0,-1.41759 -1.1995,-1.41759 -1.1995,0 -1.1995,1.41759 v 8.52736 q 0,1.39578 1.1995,1.39578 1.1995,0 1.1995,-1.39578 v -2.33358 h 2.26815 v 2.1591 q 0,1.78835 -0.91598,2.76976 -0.89417,0.98141 -2.61709,0.98141 z"
         id="path229" />
      <path
         d="m 369.96224,103.30058 h 3.24956 l 2.48623,15.26637 h -2.399 l -0.43618,-3.03147 v 0.0436 h -2.72614 l -0.43618,2.98785 H 367.476 Z m 2.61709,10.20666 -1.06864,-7.54595 h -0.0436 l -1.04684,7.54595 z"
         id="path231" />
      <path
         d="m 377.72627,105.48149 h -2.50805 v -2.18091 h 7.4151 v 2.18091 h -2.50805 v 13.08546 h -2.399 z"
         id="path233" />
      <path
         d="m 383.78921,103.30058 h 2.399 v 15.26637 h -2.399 z"
         id="path235" />
      <path
         d="m 391.44419,118.78504 q -1.76654,0 -2.70433,-1.00322 -0.93779,-1.00322 -0.93779,-2.83518 v -8.02575 q 0,-1.83197 0.93779,-2.83518 0.93779,-1.00322 2.70433,-1.00322 1.76653,0 2.70433,1.00322 0.93779,1.00321 0.93779,2.83518 v 8.02575 q 0,1.83196 -0.93779,2.83518 -0.9378,1.00322 -2.70433,1.00322 z m 0,-2.18091 q 1.24312,0 1.24312,-1.50483 v -8.33107 q 0,-1.50483 -1.24312,-1.50483 -1.24312,0 -1.24312,1.50483 v 8.33107 q 0,1.50483 1.24312,1.50483 z"
         id="path237" />
      <path
         d="m 396.70017,103.30058 h 3.00966 l 2.33357,9.13801 h 0.0436 v -9.13801 h 2.13729 v 15.26637 h -2.46443 l -2.8788,-11.14445 h -0.0436 v 11.14445 h -2.13729 z"
         id="path239" />
    </g>
    <g
       aria-label="Dependencies"
       id="text1809"
       style="font-size:21.8091px;font-family:'Bebas Neue';-inkscape-font-specification:'Bebas Neue, Normal';fill:#343b58;fill-opacity:0.999988;stroke-width:1.20297;stroke-linecap:round;stroke-linejoin:round">
      <path
         d="m 315.16685,72.423274 h 3.66393 q 1.78834,0 2.68252,0.959601 0.89417,0.9596 0.89417,2.813374 v 7.720421 q 0,1.853773 -0.89417,2.813373 -0.89418,0.959601 -2.68252,0.959601 h -3.66393 z m 3.62031,13.08546 q 0.58884,0 0.89417,-0.348946 0.32714,-0.348945 0.32714,-1.134073 v -7.938512 q 0,-0.785127 -0.32714,-1.134073 -0.30533,-0.348946 -0.89417,-0.348946 h -1.22131 v 10.90455 z"
         id="path194" />
      <path
         d="m 324.02134,72.423274 h 6.54273 v 2.18091 h -4.14372 v 4.034684 h 3.29317 v 2.18091 h -3.29317 v 4.688956 h 4.14372 v 2.18091 h -6.54273 z"
         id="path196" />
      <path
         d="m 331.93807,72.423274 h 3.53307 q 1.78835,0 2.68252,0.959601 0.89417,0.9596 0.89417,2.813374 v 1.504827 q 0,1.853774 -0.89417,2.813374 -0.89417,0.959601 -2.68252,0.959601 h -1.13407 v 6.215593 h -2.399 z m 3.53307,6.869867 q 0.58885,0 0.87236,-0.327137 0.30533,-0.327136 0.30533,-1.112264 v -1.810155 q 0,-0.785128 -0.30533,-1.112264 -0.28351,-0.327137 -0.87236,-0.327137 h -1.13407 v 4.688957 z"
         id="path198" />
      <path
         d="m 340.35637,72.423274 h 6.54273 v 2.18091 h -4.14373 v 4.034684 h 3.29318 v 2.18091 h -3.29318 v 4.688956 h 4.14373 v 2.18091 h -6.54273 z"
         id="path200" />
      <path
         d="m 348.27309,72.423274 h 3.00966 l 2.33357,9.138013 h 0.0436 v -9.138013 h 2.13729 v 15.26637 h -2.46442 L 350.454,76.545194 h -0.0436 v 11.14445 h -2.1373 z"
         id="path202" />
      <path
         d="m 357.58558,72.423274 h 3.66393 q 1.78834,0 2.68252,0.959601 0.89417,0.9596 0.89417,2.813374 v 7.720421 q 0,1.853773 -0.89417,2.813373 -0.89418,0.959601 -2.68252,0.959601 h -3.66393 z m 3.62031,13.08546 q 0.58885,0 0.89417,-0.348946 0.32714,-0.348945 0.32714,-1.134073 v -7.938512 q 0,-0.785127 -0.32714,-1.134073 -0.30532,-0.348946 -0.89417,-0.348946 h -1.22131 v 10.90455 z"
         id="path204" />
      <path
         d="m 366.44008,72.423274 h 6.54273 v 2.18091 h -4.14373 v 4.034684 h 3.29317 v 2.18091 h -3.29317 v 4.688956 h 4.14373 v 2.18091 h -6.54273 z"
         id="path206" />
      <path
         d="m 374.3568,72.423274 h 3.00966 l 2.33357,9.138013 h 0.0436 v -9.138013 h 2.13729 v 15.26637 h -2.46443 l -2.8788,-11.14445 h -0.0436 v 11.14445 h -2.13729 z"
         id="path208" />
      <path
         d="m 387.0497,87.907735 q -1.72292,0 -2.6389,-0.98141 -0.89417,-0.981409 -0.89417,-2.769755 v -8.200222 q 0,-1.788346 0.89417,-2.769755 0.91598,-0.98141 2.6389,-0.98141 1.72292,0 2.61709,0.98141 0.91598,0.981409 0.91598,2.769755 v 1.613874 h -2.26814 v -1.766537 q 0,-1.417592 -1.1995,-1.417592 -1.1995,0 -1.1995,1.417592 v 8.527358 q 0,1.395782 1.1995,1.395782 1.1995,0 1.1995,-1.395782 v -2.333574 h 2.26814 v 2.159101 q 0,1.788346 -0.91598,2.769755 -0.89417,0.98141 -2.61709,0.98141 z"
         id="path210" />
      <path
         d="m 392.02216,72.423274 h 2.399 v 15.26637 h -2.399 z"
         id="path212" />
      <path
         d="m 396.2095,72.423274 h 6.54273 v 2.18091 h -4.14373 v 4.034684 h 3.29317 v 2.18091 h -3.29317 v 4.688956 h 4.14373 v 2.18091 h -6.54273 z"
         id="path214" />
      <path
         d="m 407.28855,87.907735 q -1.74472,0 -2.6389,-0.98141 -0.89417,-1.003218 -0.89417,-2.856992 v -0.872364 h 2.26815 v 1.046837 q 0,1.483019 1.24312,1.483019 0.61065,0 0.91598,-0.348946 0.32713,-0.370754 0.32713,-1.177691 0,-0.9596 -0.43618,-1.679301 -0.43618,-0.741509 -1.61387,-1.766537 -1.48302,-1.308546 -2.07187,-2.355382 -0.58884,-1.068646 -0.58884,-2.399001 0,-1.810156 0.91598,-2.791565 0.91598,-1.003219 2.66071,-1.003219 1.72292,0 2.59528,1.003219 0.89418,0.981409 0.89418,2.835183 v 0.632464 h -2.26815 v -0.785128 q 0,-0.785127 -0.30533,-1.134073 -0.30532,-0.370755 -0.89417,-0.370755 -1.1995,0 -1.1995,1.46121 0,0.828746 0.43618,1.548446 0.45799,0.7197 1.63568,1.744728 1.50483,1.308546 2.07187,2.377192 0.56704,1.068646 0.56704,2.508046 0,1.875583 -0.9378,2.878801 -0.91598,1.003219 -2.68252,1.003219 z"
         id="path216" />
    </g>
    <g
       aria-label="Commands"
       id="text1813"
       style="font-size:21.8091px;font-family:'Bebas Neue';-inkscape-font-specification:'Bebas Neue, Normal';fill:#343b58;fill-opacity:0.999988;stroke-width:1.20297;stroke-linecap:round;stroke-linejoin:round">
      <path
         d="m 329.37554,57.030423 q -1.72292,0 -2.63891,-0.981409 -0.89417,-0.98141 -0.89417,-2.769756 v -8.200221 q 0,-1.788346 0.89417,-2.769756 0.91599,-0.981409 2.63891,-0.981409 1.72291,0 2.61709,0.981409 0.91598,0.98141 0.91598,2.769756 v 1.613873 h -2.26815 v -1.766537 q 0,-1.417591 -1.1995,-1.417591 -1.1995,0 -1.1995,1.417591 v 8.527358 q 0,1.395782 1.1995,1.395782 1.1995,0 1.1995,-1.395782 v -2.333574 h 2.26815 v 2.159101 q 0,1.788346 -0.91598,2.769756 -0.89418,0.981409 -2.61709,0.981409 z"
         id="path177" />
      <path
         d="m 337.85928,57.030423 q -1.76654,0 -2.70433,-1.003218 -0.93779,-1.003219 -0.93779,-2.835183 v -8.025749 q 0,-1.831964 0.93779,-2.835183 0.93779,-1.003218 2.70433,-1.003218 1.76654,0 2.70433,1.003218 0.93779,1.003219 0.93779,2.835183 v 8.025749 q 0,1.831964 -0.93779,2.835183 -0.93779,1.003218 -2.70433,1.003218 z m 0,-2.18091 q 1.24312,0 1.24312,-1.504828 v -8.331076 q 0,-1.504827 -1.24312,-1.504827 -1.24312,0 -1.24312,1.504827 v 8.331076 q 0,1.504828 1.24312,1.504828 z"
         id="path179" />
      <path
         d="m 343.11527,41.545963 h 3.42402 l 1.52664,10.926358 h 0.0436 l 1.52664,-10.926358 h 3.42402 v 15.266369 h -2.26814 V 45.25351 h -0.0436 l -1.74473,11.558822 h -2.00644 L 345.25256,45.25351 h -0.0436 v 11.558822 h -2.09367 z"
         id="path181" />
      <path
         d="m 354.84856,41.545963 h 3.42403 l 1.52664,10.926358 h 0.0436 l 1.52664,-10.926358 h 3.42403 v 15.266369 h -2.26815 V 45.25351 h -0.0436 l -1.74473,11.558822 h -2.00644 L 356.98585,45.25351 h -0.0436 v 11.558822 h -2.09367 z"
         id="path183" />
      <path
         d="m 368.43563,41.545963 h 3.24956 l 2.48624,15.266369 h -2.399 l -0.43619,-3.031465 v 0.04362 h -2.72613 l -0.43619,2.987846 h -2.22452 z m 2.6171,10.206658 -1.06865,-7.545948 h -0.0436 l -1.04684,7.545948 z"
         id="path185" />
      <path
         d="m 375.32729,41.545963 h 3.00965 l 2.33358,9.138012 h 0.0436 v -9.138012 h 2.1373 V 56.812332 H 380.387 l -2.8788,-11.14445 h -0.0436 v 11.14445 h -2.13729 z"
         id="path187" />
      <path
         d="m 384.63977,41.545963 h 3.66393 q 1.78835,0 2.68252,0.9596 0.89418,0.9596 0.89418,2.813374 v 7.720421 q 0,1.853773 -0.89418,2.813374 -0.89417,0.9596 -2.68252,0.9596 h -3.66393 z m 3.62032,13.085459 q 0.58884,0 0.89417,-0.348945 0.32713,-0.348946 0.32713,-1.134074 v -7.938512 q 0,-0.785127 -0.32713,-1.134073 -0.30533,-0.348945 -0.89417,-0.348945 h -1.22131 v 10.904549 z"
         id="path189" />
      <path
         d="m 396.61297,57.030423 q -1.74473,0 -2.6389,-0.981409 -0.89417,-1.003219 -0.89417,-2.856992 v -0.872364 h 2.26814 v 1.046836 q 0,1.483019 1.24312,1.483019 0.61066,0 0.91598,-0.348945 0.32714,-0.370755 0.32714,-1.177692 0,-0.9596 -0.43618,-1.6793 -0.43618,-0.74151 -1.61387,-1.766537 -1.48302,-1.308546 -2.07187,-2.355383 -0.58884,-1.068646 -0.58884,-2.399001 0,-1.810155 0.91598,-2.791565 0.91598,-1.003218 2.66071,-1.003218 1.72292,0 2.59528,1.003218 0.89417,0.98141 0.89417,2.835183 v 0.632464 h -2.26814 v -0.785128 q 0,-0.785127 -0.30533,-1.134073 -0.30533,-0.370754 -0.89417,-0.370754 -1.1995,0 -1.1995,1.461209 0,0.828746 0.43618,1.548446 0.45799,0.719701 1.63568,1.744728 1.50483,1.308546 2.07187,2.377192 0.56703,1.068646 0.56703,2.508046 0,1.875583 -0.93779,2.878802 -0.91598,1.003218 -2.68252,1.003218 z"
         id="path191" />
    </g>
  </g>
</svg>
</p>
</div>
</div>
</section>
<section id="base-images" class="slide level2">
<h2>Base Images</h2>
<ul>
<li><p>You will almost always start from an initial basic image</p></li>
<li><p>A collection of universally accessible images is hosted on <a
href="https://hub.docker.com/search?q=">DockerHub</a></p></li>
<li><p>These are all images in themselves, but also serve as excellent
starting points for more custom images that you might want to
build</p></li>
<li><p>To download an image to your system for use, from a terminal:</p>
<pre ><code class="bash">docker pull image_name:possible_tag</code></pre></li>
<li><p>To see images currently on your system:</p>
<pre ><code class="bash">docker images</code></pre></li>
</ul>
</section>
<section id="containers-from-images" class="slide level2">
<h2>Containers from Images</h2>
<ul>
<li><p>To actually run a container, you can use the GUI, or, from a
terminal:</p>
<pre ><code class="bash">docker run --flags container_name</code></pre>
<ul>
<li><code class="pgsql">run</code> creates and starts the container</li>
<li><code class="pgsql">--flags</code> could be any number of options or
boolean flags. Common ones include:
<ul>
<li><code class="pgsql">-it</code> to launch interactively</li>
<li><code class="pgsql">--rm</code> to remove the container once the
command or interactive session finishes</li>
<li><code class="pgsql">-d</code> to run the container detached</li>
</ul></li>
<li>The container name is the name and (optionally) tag of the container
you want to launch.
<ul>
<li>If the container is not already on your system, Docker will download
it from DockerHub</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="working-with-containers" class="slide level2">
<h2>Working with Containers</h2>
<ul>
<li><p>To get a view of currently <em>running</em> containers:</p>
<pre ><code class="bash">docker ps</code></pre>
<ul>
<li>Add a <code class="pgsql">-a</code> flag at the end to see
<strong>all</strong> containers</li>
</ul></li>
<li><p>To remove old containers:</p>
<pre ><code class="bash">docker container rm container_name_or_id</code></pre></li>
<li><p>Can start or stop exist containers with:</p>
<pre ><code class="bash">docker start/stop container_name</code></pre></li>
</ul>
</section>
<section id="customizing-images" class="slide level2">
<h2>Customizing Images</h2>
<ul>
<li><p>Generally, you will want to customize a base image by adding your
own layers on top</p></li>
<li><p>The schematic of what comprises an image is all contained in a
special text file, named <code class="pgsql">Dockerfile</code></p>
<ul>
<li>Note the lack of extension at the end!</li>
</ul></li>
<li><p>A Dockerfile is a simple text file with some special instructions
that dictate what layers comprise your image</p></li>
<li><p>A Dockerfile is used to <em>build</em> the image</p>
<pre ><code class="bash">docker build -t img_name path/to/dockerfile</code></pre></li>
</ul>
</section>
<section id="adding-layers-in-the-dockerfile" class="slide level2">
<h2>Adding Layers in the Dockerfile</h2>
<div class="cols">
<div class="col">
<ul>
<li>Dockerfiles use a syntax with only a few keywords
<ul>
<li><code class="pgsql">FROM</code> specifies the base image you are
starting with</li>
<li><code class="pgsql">RUN</code> specifies a command to run. Often to
satisfy dependencies or get libraries</li>
<li><code class="pgsql">COPY</code> will copy file from your local
system into the image</li>
<li><code class="pgsql">CMD</code> specifies the default command to be
run when the image is launched</li>
</ul></li>
</ul>
</div>
<div class="col">
<pre ><code class="file" name="Dockerfile" style="font-size:.8em">FROM python:3

WORKDIR /app

COPY image.py .

RUN pip install numpy matplotlib

CMD ["python", "image.py"]</code></pre>
<ul>
<li>Layers are built from the “bottom up”</li>
</ul>
</div>
</div>
</section>
<section id="isolation" class="slide level2">
<h2>Isolation</h2>
<ul>
<li>Containers run as isolated systems, which is usually a good thing
<ul>
<li>Ensures that nothing on your local system affects the container
system</li>
</ul></li>
<li>Sometimes though we <em>need</em> holes “broken” in the isolation
<ul>
<li>A web server is available at a certain port, but we can’t access
that port in the isolated container</li>
<li>A program might generate a file, but that is in the container
filesystem, which we can not access</li>
</ul></li>
</ul>
</section>
<section id="poking-holes" class="slide level2">
<h2>Poking Holes</h2>
<ul>
<li>When running a container, you can poke holes in the container to
connect certain internal parts of the container with particular parts of
your outside system
<ul>
<li><p>Connecting ports</p>
<pre ><code class="text">docker run -p localport:containerport cont_name</code></pre></li>
<li><p>Connecting folders</p>
<pre ><code class="text">docker run -v /local/folder:/container/folder cont_name</code></pre></li>
</ul></li>
</ul>
</section>
<section id="challenge" class="slide level2">
<h2>Challenge</h2>
<ul>
<li>I have uploaded an image of my own to DockerHub, which you can find
at <code class="pgsql">jrembold/dockerdemo</code></li>
<li>On your own time, see if you can:
<ul>
<li>Download the image</li>
<li>Run the image interactively</li>
<li>Find further instructions inside</li>
</ul></li>
<li>I’ll give you some extra HW points if you can email me with the
answer to the further instructions :)</li>
</ul>
</section></section>
<section>
<section id="break" class="title-slide slide level1">
<h1>Break!</h1>

</section>
<section id="break-time" class="slide level2">
<h2>Break Time!</h2>
<p><img data-src="../images/nomming_catepillar.png" /></p>
</section></section>
<section>
<section id="identify-yourself" class="title-slide slide level1">
<h1>Identify Yourself</h1>

</section>
<section id="review" class="slide level2">
<h2>Review!</h2>
<div class="cols">
<div class="col">
<p>Given the table (named <code class="pgsql">employees</code>) to the
right and the query immediately below, what would the output table look
like?</p>
<pre ><code class="pgsql" style="font-size:.8em">SELECT p1.name, p2.name
FROM employees as p1
LEFT JOIN employees as p2
  ON p1.superior id > p2.id
ORDER BY p1.name LIMIT 2;</code></pre>
</div>
<div class="col" style="font-size:.9em">
<table>
<thead>
<tr class="header">
<th>id</th>
<th>name</th>
<th>superior_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Bob</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>2</td>
<td>Frank</td>
<td>1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Kelly</td>
<td>1</td>
</tr>
<tr class="even">
<td>4</td>
<td>Anne</td>
<td>3</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Tiffany</td>
<td>2</td>
</tr>
<tr class="even">
<td>6</td>
<td>Henry</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="hpoll" style="font-size:.8em">
<ol>
<li><table>
<thead>
<tr class="header">
<th>name</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Anne</td>
<td>Kelly</td>
</tr>
<tr class="even">
<td>Bob</td>
<td>NULL</td>
</tr>
</tbody>
</table></li>
<li><table>
<thead>
<tr class="header">
<th>name</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Anne</td>
<td>Kelly</td>
</tr>
<tr class="even">
<td>Frank</td>
<td>Bob</td>
</tr>
</tbody>
</table></li>
<li><table>
<thead>
<tr class="header">
<th>name</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Frank</td>
<td>Bob</td>
</tr>
<tr class="even">
<td>Kelly</td>
<td>Bob</td>
</tr>
</tbody>
</table></li>
<li><table>
<thead>
<tr class="header">
<th>name</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Anne</td>
<td>Bob</td>
</tr>
<tr class="even">
<td>Anne</td>
<td>Frank</td>
</tr>
</tbody>
</table></li>
</ol>
</div>
</section>
<section id="identifiers" class="slide level2">
<h2>Identifiers</h2>
<ul>
<li>We’ve been naming tables and columns for a while now, and sometimes
you’ve seen double quotes around them and other times you have not</li>
<li>Double quotes around an identifier (table or column name) achieves
several things:
<ul>
<li>The name becomes <em>case sensitive</em>. Otherwise, all names in
SQL are case insensitive.</li>
<li>The name can include special characters that otherwise are not
allowed
<ul>
<li>Without double quotes, only letters, underscores, or digits are
allowed, and the identifier must start with a letter or underscore</li>
</ul></li>
<li>The name could be the same as an SQL keyword
<ul>
<li>If the keyword clearly would not apply where the identifier exists,
SQL can figure it out, but otherwise it MUST be double quoted</li>
<li>Try to limit naming identifiers after common keywords, as it just
gets confusing</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="guidelines" class="slide level2">
<h2>Guidelines</h2>
<ul>
<li>Recommendations for good identifier naming:
<ul>
<li><strong>Use snake case:</strong> Using all lowercase characters and
underscores to separate words</li>
<li><strong>Keep names easy to understand:</strong> As the complexity of
the database increases, it might start having 100’s of tables. Given
them names that actually help you immediately know what they
contain!</li>
<li><strong>Use plurals for table names:</strong> Tables hold many rows
worth of data, so it makes sense to refer to them in the plural.</li>
<li><strong>Keep them fairly short:</strong> Postgres limits you to 63
characters, but other systems are even less. So keep them short and
sweet.</li>
<li><strong>When copying tables, use new names that assist later
management:</strong> Often you may want to copy a table to run some
calculations or alter it in a way that does not affect the original.
Consider appending the date in <code class="pgsql">YYYY-MM-DD</code> to
the table name to make it easier to find later what your latest version
is.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="encoding-constraints" class="title-slide slide level1">
<h1>Encoding Constraints</h1>

</section>
<section id="why-constrain-yourself" class="slide level2">
<h2>Why Constrain Yourself?</h2>
<ul>
<li>Data is only useful if we can easily access it in the form we’d
expect</li>
<li>Specific column types already are one step in this direction
<ul>
<li>Entering in data in another format either gets converted or an error
gets output</li>
</ul></li>
<li>We can also import a variety of other <em>constraints</em> on the
columns or rows of our table
<ul>
<li>All are with the idea of further ensuring that the data in our table
is of the form that we expect</li>
<li>If we try to enter or change any data that would violate these
constraints, SQL will return an error instead.</li>
</ul></li>
</ul>
</section>
<section id="constraining-details" class="slide level2">
<h2>Constraining Details</h2>
<ul>
<li><p>Postgres gives you two main locations where you can apply
constraints:</p>
<ul>
<li>At the column level, immediately after specifying a column type</li>
<li>At the table level, after all columns have been specified</li>
</ul></li>
<li><p>For the most part, all the different types of contraints can be
applied in either location</p>
<ul>
<li>Only exception is constraints that refer to multiple columns, which
should be applied as table constraints</li>
</ul></li>
<li><p>The anatomy of a constraint syntax looks like:</p>
<pre ><code class="pgsql" style="font-size:0.8em">CONSTRAINT |||constraint name||| |||CONSTRAINT_TYPE||| |||CONSTRAINT_CONDITIONS|||</code></pre></li>
</ul>
</section>
<section id="check" class="slide level2">
<h2>CHECK</h2>
<ul>
<li>The <code class="pgsql">CHECK</code> constraint is perhaps the most
straightforward, in that it just checks to see if a certain condition is
true</li>
<li>If the condition is untrue, then an error will be raised</li>
<li>Can be written in either form, but must be a table constrain if
referencing multiple columns</li>
</ul>
<pre ><code class="pgsql" style="font-size:1em">CREATE TABLE |||tablename||| (
  |||col₁||| INT CHECK (|||col₁||| > 0),
  |||col₂||| INT,
  |||col₃||| INT,
  CONSTRAINT |||constraint_name||| CHECK (|||col₂||| > |||col₃|||)
);</code></pre>
</section>
<section id="not-null" class="slide level2">
<h2>NOT NULL</h2>
<ul>
<li>Often, you may want to enforce a particular column to
<em>always</em> have data</li>
<li>To do so, you can set up a contraint on a column to not contain any
null values</li>
<li>The <code class="pgsql">NOT NULL</code> constraint is only applied
to columns, not to the entire table!</li>
</ul>
<pre ><code class="pgsql">CREATE TABLE |||tablename||| (
  |||col₁||| INT NOT NULL,
  |||col₂||| INT
);</code></pre>
</section>
<section id="uniqueness" class="slide level2">
<h2>Uniqueness</h2>
<ul>
<li>Similarly to forcing a column to always contain data, you can also
force it to have only <em>unique</em> data</li>
<li>Requires that every row in that column have a distinct value. Any
duplicates will be rejected.</li>
<li>If done as a table constraint, can also require
<strong>pairs</strong> of columns to be unique</li>
</ul>
<pre ><code class="pgsql">CREATE TABLE |||tablename||| (
  |||col₁||| INT UNIQUE,
  |||col₂||| INT,
  |||col₃||| INT,
  CONSTRAINT |||constraint_name||| UNIQUE (|||col₂|||, |||col₃|||)
);</code></pre>
</section>
<section id="understanding-check" class="slide level2">
<h2>Understanding Check</h2>
<div class="cols">
<div class="col">
<p>Given the table created as seen below, which insertion command would
complete successfully?</p>
<pre ><code class="pgsql" style="font-size:.8em">CREATE TABLE uc (
  id_num INT UNIQUE NOT NULL,
  prod_name TEXT UNIQUE,
  price NUMERIC(5,2)
  wholesale NUMERIC(5,2),
  CHECK (price > wholesale),
  CHECK (price >= 0)
);</code></pre>
</div>
<div class="col">
<pre ><code class="pgsql answer" name="A" style="font-size:.6em; margin-bottom:1em;">INSERT INTO uc VALUES
 (1, 'Steak', 3.22, 5.00),
 (2, 'Beans', 4.12, 2.50));</code></pre>
<pre ><code class="pgsql answer" name="B" style="font-size:.6em; margin-bottom:1em">INSERT INTO uc VALUES
 (1, 'Steak', 3.22, 1.23),
 (2, NULL, 2.65, 1.26));</code></pre>
<pre ><code class="pgsql answer" name="C" style="font-size:.6em; margin-bottom:1em">INSERT INTO uc VALUES
 (1, 'Steak', 3.22, 2.78),
 (NULL, 'Beans', 4.12, 2.50));</code></pre>
<pre ><code class="pgsql answer" name="D" style="font-size:.6em; margin-bottom:1em">INSERT INTO uc VALUES
 (1, 'Steak', -3.22, -5.00),
 (2, 'Steak', 4.12, 2.50));</code></pre>
</div>
</div>
</section>
<section id="the-primary-directive" class="slide level2">
<h2>The Primary Directive</h2>
<ul>
<li>Combining <code class="pgsql">UNIQUE</code> and
<code class="pgsql">NOT NULL</code> is so common that such a constraint
gets its own name: the <em>primary key</em></li>
<li>A primary key gives you an unambiguous way to select a specific row
from a table</li>
<li>If you already have a table column doing this, why declare as a
primary key?
<ul>
<li>It enforces that entries in your column need to maintain this unique
and present constraint going forward</li>
<li>It can simplify joins, as the default column to join on is the
primary key</li>
<li>It will speed of queries, as SQL uses the primary key to better
optimize its searches</li>
</ul></li>
<li>Sometimes desirable to create a <em>composite primary key</em> based
off multiple columns</li>
</ul>
</section>
<section id="natural-vs-surrogate" class="slide level2">
<h2>Natural vs Surrogate</h2>
<ul>
<li>Where possible, using a <em>natural</em> primary key is often
preferred
<ul>
<li>Requires that a column already in your data meets the criteria of
containing purely unique, non-null values</li>
<li>Can sometimes combine a few columns to arrive at this
requirement</li>
<li>Using the existing data for the key helps give the primary key some
actual meaning</li>
</ul></li>
<li>In other situations, a <em>surrogate</em> primary key may be
necessary
<ul>
<li>Adds an artificial column to your table that contains purely unique,
non-null values
<ul>
<li>The <code class="pgsql">SERIAL</code> data types are great for this,
or some people prefer to use UUIDs</li>
</ul></li>
<li>The drawback is that your tables may lose some meaning without
performing a bunch of joins</li>
</ul></li>
</ul>
</section>
<section id="creating-primary-keys" class="slide level2">
<h2>Creating Primary Keys</h2>
<ul>
<li>You can create a primary key constraint on a single column using
either syntax</li>
<li>Composite primary keys must be done as a table constraint</li>
</ul>
<pre ><code class="pgsql" style="font-size:1em; margin-bottom:1em">CREATE TABLE |||tablename||| (
  |||col₁||| TEXT PRIMARY KEY,
  |||col₂||| INT
  );</code></pre>
<pre ><code class="pgsql" style="font-size:1em;">CREATE TABLE |||tablename||| (
  |||col₁||| TEXT,
  |||col₂||| INT,
  |||col₃||| INT,
  CONSTRAINT |||constraint_name||| PRIMARY KEY (|||col₁|||, |||col₂|||)
);</code></pre>
</section>
<section id="foreign-keys" class="slide level2">
<h2>Foreign Keys</h2>
<ul>
<li><p>Tables can be related to other tables: <em>foreign key
constraints</em> are a way to formalize these relationships</p></li>
<li><p>Says: “the values in this column are related to this other column
in this other table”</p>
<ul>
<li>Almost always refers to another primary key, though it could
technically be any uniquely constrained column</li>
</ul></li>
<li><p>Could have many foreign key constraints in one table, as opposed
to having only a single primary key constraint</p></li>
<li><p>Uses the keyword <code class="pgsql">REFERENCES</code></p>
<pre ><code class="pgsql" style="font-size:1em">CREATE TABLE |||table₂||| (
  |||col₁||| TEXT PRIMARY KEY,
  |||col₂||| INT REFERENCES |||table₁||| (|||col₁|||)
);</code></pre></li>
</ul>
</section>
<section id="table-foreign-constraints" class="slide level2">
<h2>Table Foreign Constraints</h2>
<ul>
<li>Declaring foreign constraints in the table syntax is a bit more
cumbersome, and I’d only do it if you had a composite primary key that
you needed to match</li>
</ul>
<pre ><code class="pgsql">CREATE TABLE |||table₂||| (
  |||col₁||| TEXT PRIMARY KEY,
  |||col₂||| INT,
  |||col₃||| INT,
  CONSTRAINT |||constraint_name||| FOREIGN KEY (|||col₂|||, |||col₃|||) 
    REFERENCES |||table₁||| (|||col₁|||, |||col₂|||)
);</code></pre>
</section>
<section id="foreign-considerations" class="slide level2">
<h2>Foreign Considerations</h2>
<ul>
<li>Foreign keys are meant to enforce the relations between tables, so
they raise some other considerations
<ul>
<li>You can not add a row to a table that refers to another until that
other table contains the necessary referenced key</li>
<li>You can not delete a table that has another depending on it</li>
<li>By default, you can not delete or change an individual row in a
table that is being referenced by another
<ul>
<li>Can alter this so that any referencing rows are ALSO deleted</li>
<li>Could also tweak to set those row foreign keys to be
<code class="pgsql">NULL</code> or the column default</li>
</ul>
<pre ><code class="pgsql">...
|||col₂||| INT REFERENCES |||table₁||| ON DELETE CASCADE
|||col₃||| INT REFERENCES |||table₁||| ON DELETE SET NULL
...</code></pre></li>
</ul></li>
</ul>
</section>
<section id="example" class="slide level2">
<h2>Example</h2>
<ul>
<li>We previously looked at joins with the roster, hw_info, and
submissions tables. How would we create these with full
constraints?</li>
</ul>
<p><img data-src="../images/hw_assignment_schema.png"
style="width:70.0%" /></p>
</section>
<section id="activity" class="slide level2">
<h2>Activity</h2>
<p>Suppose you wanted to track your Spotify playlist information in your
own database. Questions you may want to be able to answer might
include:</p>
<ul>
<li>What is the total playtime of this playlist?</li>
<li>What is the most common band in a particular playlist?</li>
<li>Of all the artists who perform songs in any playlist, which artists
collaborate with others the most?</li>
<li>Songs from how many different albums are in a particular
playlist?</li>
</ul>
<p>In groups of two or three, sketch out table diagrams similar to what
we just saw in the previous example (commonly called ERD or Entity
Relationship Diagrams), that would allow all these questions to be
answered. Your tables should include primary keys and foreign keys where
appropriate.</p>
<p>Online sketching resources include: <a
href="https://drawsql.app/">drawsql</a>, <a
href="https://online.visual-paradigm.com/">visual-paradigm</a>, or <a
href="https://app.diagrams.net/">DrawIO</a></p>
</section></section>
<section>
<section id="the-quest-for-efficiency" class="title-slide slide level1">
<h1>The Quest for Efficiency</h1>

</section>
<section id="creating-indexes" class="slide level2">
<h2>Creating Indexes</h2>
<ul>
<li>We’ve talked previously about indexes from a theoretical view, now
to put them into practice</li>
<li>Postgres will automatically index any column that is a primary key
or which has the <code class="pgsql">UNIQUE</code> constraint</li>
<li>You can choose to set up indexes on other columns as well
though</li>
<li>By default, the assigned index type is a B-Tree index in Postgres
<ul>
<li>B-Trees work best for <em>orderable</em> type data</li>
<li>You <em>can</em> assign other types of indexes to columns though, so
you can somewhat customize to what will work best
<ul>
<li>Index types like <em>Generalized Inverted Index</em> (GIN) and
<em>Generalized Search Tree</em> (GiST) will be discussed later as they
come up</li>
</ul></li>
</ul></li>
</ul>
<pre ><code class="pgsql" style="font-size:1em">CREATE INDEX |||index_name||| ON |||table||| (|||column|||);</code></pre>
</section>
<section id="benchmarking" class="slide level2">
<h2>Benchmarking</h2>
<ul>
<li>One of the prime reasons for creating an index is to speed up access
or manipulation of the data later</li>
<li>How can we objectively test this?
<ul>
<li>Postgres has the <code class="pgsql">EXPLAIN</code> keyword to give
you information about what the database is doing in the background</li>
<li>Using <code class="pgsql">EXPLAIN ANALYZE</code> will also give you
timing information about how long it took a query to run</li>
</ul></li>
<li><code class="pgsql">EXPLAIN</code> always comes at the start of your
query</li>
<li>Other SQL variants have their own versions, but most have some
method of getting information back about execution time or what is being
done under the hood</li>
</ul>
</section>
<section id="costs" class="slide level2">
<h2>Costs</h2>
<ul>
<li>Indexes always have a cost associated with them, both in initial
setup and in every time new data is added to the column
<ul>
<li>Also, they are stored information, so they can also inflate your
database size</li>
</ul></li>
<li>Consider indexing only those columns that receive the heaviest of
use in filters or in joining</li>
<li>You never need to worry about indexing primary keys or unique
columns, as those are done automatically</li>
<li>When in doubt, <strong>benchmark</strong> your queries before and
after adding an index to see if you are really gaining much from
it!</li>
</ul>
</section></section>
    </div>
  </div>

  <script src="../html_srcs/revealjs/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="../html_srcs/revealjs/plugin/notes/notes.js"></script>
  <script src="../html_srcs/revealjs/plugin/search/search.js"></script>
  <script src="../html_srcs/revealjs/plugin/zoom/zoom.js"></script>
  // Added plugins
  <script src="../html_srcs/revealjs/../plugin/chart/Chart.min.js"></script>
  <script src="../html_srcs/revealjs/../plugin/chart/plugin.js"></script>
  <script src="../html_srcs/revealjs/../plugin/chalkboard/plugin.js"></script>
  <script src="../html_srcs/revealjs/../plugin/menu/menu.js"></script>
  <script src="../html_srcs/revealjs/../other_plugins/reveal.js-d3/reveald3.js"></script>
  <script src="../html_srcs/revealjs/plugin/math/math.js"></script>
  <script src="../html_srcs/revealjs/plugin/highlight/highlight.js"></script>
  <script src="../html_srcs/revealjs/../js/mypgsql.js"></script>
  <script src="../html_srcs/revealjs/../js/mybash.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
		//autoAnimateEasing: 'ease-in',
		//autoAnimateDuration: 1.0,
		//autoAnimateUnmatched: false,
        pdfSeparateFragments: false,
        // Display controls in the bottom right corner
        controls: true,
        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,
        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',
        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,
        // Push each slide change to the browser history
        history: true,
        // Enable keyboard shortcuts for navigation
        keyboard: true,
        // Enable the slide overview mode
        overview: true,
        // Vertical centering of slides
        center: false,
        // Enables touch navigation on devices with touch input
        touch: true,
        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',
        // Turns fragments on and off globally
        fragments: true,
        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,
        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,
        // Global override for autoplaying embedded media (video/audio/iframe)
        // - null: Media will only autoplay if data-autoplay is present
        // - true: All media will autoplay, regardless of individual setting
        // - false: No media will autoplay, regardless of individual setting
        autoPlayMedia: null,
        // Global override for preloading lazy-loaded iframes
        // - null: Iframes with data-src AND data-preload will be loaded when within
        //   the viewDistance, iframes with only data-src will be loaded when visible
        // - true: All iframes with data-src will be loaded when within the viewDistance
        // - false: All iframes with data-src will be loaded only when visible
        preloadIframes: null,
        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,
        // Stop auto-sliding after user input
        autoSlideStoppable: true,
        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,
        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,
        // Hide cursor if inactive
        hideInactiveCursor: true,
        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Transition speed
        transitionSpeed: 'default', // default/fast/slow
        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
        // Number of slides away from the current that are visible
        viewDistance: 3,
        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,
        height: 1080,
        // The display mode that will be used to show slides
        display: 'block',
		math: {
		  <!--mathjax: '../html_srcs/reveal.js/plugin/math/mathjax/tex-mml-chtml.js',-->
		  <!--config: 'tex-mml-chtml',-->
		  <!--tex2jax: {-->
			<!--inlineMath: [['\\(','\\)']],-->
			<!--displayMath: [['\\[','\\]']],-->
			<!--balanceBraces: true,-->
			<!--processEscapes: false,-->
			<!--processRefs: true,-->
			<!--processEnvironments: true,-->
			<!--preview: 'TeX',-->
			<!--skipTags: ['script','noscript','style','textarea','pre','code'],-->
			<!--ignoreClass: 'tex2jax_ignore',-->
			<!--processClass: 'tex2jax_process'-->
		  <!--},-->
		  CommonHTML: {scale: 80},
		},
	reveald3: {
			runLastState: true, // true/false, default: true
			onSlideChangedDelay: 200,
			mapPath: false, // true / false / "spefific/path/as/string", default: false
			tryFallbackURL: true, // true/false, default false
			disableCheckFile: false, //default false
		 },
          highlight: {
            beforeHighlight: hljs => {
              hljs.registerLanguage("pgsql", function(hljs) {
                console.log(mypgsqldef);
                return mypgsqldef(hljs); 
              });
              hljs.registerLanguage("bash", function(hljs) {
                console.log(mybashdef);
                return mybashdef(hljs); 
              });
              console.log(hljs);
              document.querySelectorAll('code').forEach((block) => {
                hljs.highlightElement(block);
            });
            }
          },

        // reveal.js plugins
        plugins: [
		  RevealMath,
          RevealHighlight,
          RevealNotes,
          RevealSearch,
          RevealZoom,
		  RevealChart,
		  RevealChalkboard,
          RevealMenu,
          Reveald3,
        ],
		chalkboard: {
          boardmarkerWidth: 4,
          chalkWidth: 7,
          boardmarkers : [
                  { color: 'rgba(46,52,64,1)',    cursor: 'url(' + path + 'img/boardmarker-black.png), auto'},
                  { color: 'rgba(94,129,172,1)',  cursor: 'url(' + path + 'img/boardmarker-blue.png), auto'},
                  { color: 'rgba(191,97,106,1)',  cursor: 'url(' + path + 'img/boardmarker-red.png), auto'},
                  { color: 'rgba(163,190,140,1)', cursor: 'url(' + path + 'img/boardmarker-green.png), auto'},
                  { color: 'rgba(208,135,112,1)', cursor: 'url(' + path + 'img/boardmarker-orange.png), auto'},
                  { color: 'rgba(180,142,173,1)', cursor: 'url(' + path + 'img/boardmarker-purple.png), auto'},
                  { color: 'rgba(235,203,139,1)', cursor: 'url(' + path + 'img/boardmarker-yellow.png), auto'}
          ],
          chalks: [
                  { color: 'rgba(216,222,223,0.5)',cursor: 'url(' + path + 'img/chalk-white.png), auto'},
                  { color: 'rgba(94,129,172,0.5)', cursor: 'url(' + path + 'img/chalk-blue.png), auto'},
                  { color: 'rgba(191,97,106,0.5)', cursor: 'url(' + path + 'img/chalk-red.png), auto'},
                  { color: 'rgba(163,190,140,0.5)',cursor: 'url(' + path + 'img/chalk-green.png), auto'},
                  { color: 'rgba(208,135,112,0.5)',cursor: 'url(' + path + 'img/chalk-orange.png), auto'},
                  { color: 'rgba(180,142,173,0.5)',cursor: 'url(' + path + 'img/chalk-purple.png), auto'},
                  { color: 'rgba(235,203,139,0.5)',cursor: 'url(' + path + 'img/chalk-yellow.png), auto'}
          ]
		},
		dependencies: [
            // { src: "../html_srcs/revealjs/plugin/title-footer/title-footer.js", async: true, callback: function() { title_footer.initialize({css:"../html_srcs/revealjs/plugin/title-footer/title-footer.css"}); } },
            //{ src: "../html_srcs/revealjs/plugin/d3/reveald3.js" },
		],
      });
    </script>
    <script>
    // This is admitedly a very hacky way to achieve my pseudo code highlighting, but it works?
      function remove_bars() {
        var pseudoBlocks = document.getElementsByClassName("hljs-pseudo");
        console.log(pseudoBlocks);
        for ( var i = 0; i < pseudoBlocks.length; i++) {
          pseudoBlocks[i].innerHTML = pseudoBlocks[i].innerHTML.replaceAll("\|\|\|", "");
        }
        }
      // omg this is even more hacky now, but I need this to run after hljs has done its thing
      setTimeout(remove_bars, 100);
    </script>
    </body>
</html>
